<html>
<title>OVP m16c Single Core Demo</title>
<head><style>
	body {
		text-align: center;
	}
	#page-wrap {
		text-align: left;
		 width: 90%;
		 margin: 0 auto;
	 }
	#checkFiles {
		text-align: left;
		width: 90%;
		margin: 0 auto;
	 }
	 
</style></head>
<body><div id='page-wrap'>
<h1>Demonstration README - Single Core Example</h1>
<p>Contents:</p>
<ul>
<li><a href=#rmWriteSectionSingleIntro >Single core variant: m16c</a><br/></li>
<li><a href=#rmWriteSectionRun >Running the simulation</a><br/></li>
<li><a href=#rmWriteSectionResults >Interpreting results</a><br/></li>
<li><a href=#rmWriteSectionBuild >Building a Test Harness and Re-Building Applications</a><br/></li>
<li><a href=#rmWriteSectionISS >The Imperas Instruction Set Simulator (ISS)</a><br/></li>
</ul>
<hr>
<a id='rmWriteSectionSingleIntro'>
<h1>Single core variant: m16c</h1>
</a>
<p>
		This demonstration shows running a simulation of a platform containing a single <a href=http://www.ovpworld.org/processor-model-variant-renesas-m16c-m16c title='look at OVPWorld page on this variant'>Renesas m16c</a>
		processor instance, and a memory map ranging from #00000000 to #FFFFFFFF.
	</p>
<p><img src=../../../../pictures/Single_Run.jpg alt=IMG_SINGLE_RUN height=400></p>
<p>
		This platform can then be used to execute pre-compiled applications; the 
		following are provided as examples:
	</p>
<ul>
<li><a href=../../../Applications/peakSpeed1_m16c/m16c_peakSpeed1.c title='look at application source'>m16c_peakSpeed1.c</a> (<a href=../../../Applications/peakSpeed1_m16c title='look at application directory'>../../../Applications/peakSpeed1_m16c/peakSpeed1_m16c.M16C-O0-g.elf</a>)</li>
<li><a href=../../../Applications/fibonacci_m16c/m16c_fibonacci.c title='look at application source'>m16c_fibonacci.c</a> (<a href=../../../Applications/fibonacci_m16c title='look at application directory'>../../../Applications/fibonacci_m16c/fibonacci_m16c.M16C-O2-g.elf</a>)</li>
</ul>
<p>
		After each application has executed, a simulation summary will be printed,
		indicating the number of instructions executed, and the performance of the
		simulation in terms of Millions of simulated Instructions executed Per
		Second (MIPS)
		<br/><br/>
		This demonstration actually runs using the Imperas Instruction Set Simulator (ISS) but a platform/module very similar to the one being used in this demonstration can be found
		in the <a href=../../../../../../Examples/SimulationControl/simplePlatformInHarnessUsingOP/harness title='look at example platform source and Makefile'>Examples/SimulationControl/simplePlatformInHarnessUsingOP</a> directory that is installed in an OVPsim or Imperas install. There is more information on the ISS below.
		<br/><br/>
		This example platform is written in C and is compiled with GCC under Linux or
		using MinGW/MSYS from http://www.mingw.org under Windows.
		The version of <a href=http://www.ovpworld.org/resources/windows title='look at MinGW/MSYS download page on OVPWorld'>MinGW/MSYS</a> that we use is available here.
	</p>
<hr>
<a id='rmWriteSectionRun'>
<h1>Running the simulation</h1>
</a>
<h2>From a Microsoft window manager or Linux / MSYS shell</h2>
<p>
		Launch the platform with a pre-compiled application; in Windows by double 
		clicking one of the batch files (.bat) or in Linux / MSYS by executing one of the shell 
		scripts (.sh).
		<br/><br/>
		The scripts will be available dependent upon the applications available:
	</p>
<ul>
<li>Run_PeakSpeed2.bat (Windows)</li>
<li>Run_PeakSpeed2.sh (Linux/MSYS)</li>
<li>Run_Fibonacci.bat (Windows)</li>
<li>Run_Fibonacci.sh (Linux/MSYS)</li>
</ul>
<p>The simulation will run and print statistics upon completion.</p>
<h2>From the command line</h2>
<p>
		If running a DOS command window, or a MSYS shell, or a Linux shell, simply change
		directory to an appropriate directory, then type the name of the ISS executable, iss.exe or issdemo.exe (dependent on installation), 
		provide the name of the variant you want after the --variant argument, and provide the
		application after the --program argument, for example:
		<br/><br/>
		cmd > issdemo.exe --variant m16c --numprocessors 1   --program ../../../Applications/peakSpeed1_m16c/peakSpeed1_m16c.M16C-O0-g.elf
		<br/><br/>
		Note that often other options like --processorname and parameters such as --parameter endian=little, are also needed. Look at the above script files to see what is needed for a specific variant.
		<br/><br/>
		You can use issdemo.exe --help to see more options.
		<br/><br/>
		The simulation will run and print statistics upon completion.
	</p>
<hr>
<a id='rmWriteSectionResults'>
<h1>Interpreting results</h1>
</a>
<p>
		At the end of simulation, a number of statistics will be printed.
		Amongst the statistical information which is reported, are the number
		of 'Simulated instructions' and the 'Simulated MIPS'.
	</p>
<p><img src=../../../../pictures/Single_Run_Output.jpg alt=IMG_RUNOUTPUT height=200></p>
<p>
		The 'Simulated instructions' will vary depending upon the application being
		executed, this count indicates the number of simulated processor
		instructions for the processors in the platform.
		<br/><br>
		The 'Simulated MIPS' will be a measure of the number of 'Simulated
		instructions' over the host elapsed time.
		The simulation must run for around 1 second of simulated time in order to print 
		simulated MIPS statistics.
		<br/><br>
		If you have multiple processors in your simulation, there will be a statistics sections for
		each processor, and then a summary for the overall simulation run.
	</p>
<hr>
<a id='rmWriteSectionBuild'>
<h1>Building a Test Harness and Re-Building Applications</h1>
</a>
<p>
		In order to build a full product install must have been carried out. This may
		be the OVP 'OVPsim' package or one of the Imperas Professional Tools
		packages (*SDK or *DEV). 
		<br/><br>
		A processor cross compiler toolchain package must be installed to allow the 
		applications to be rebuilt.
	</p>
<p>
			This will be available from OVPWorld, with a package name similar to 
			<b>m16c.toolchain.YYYYMMDD.v.OS.exe</b>. Alternatively an external 
			toolchain to support this processor variant can be used. Please check the requirements.
			<br/><br>
		</p>
<p>
		An example of a Harness and Makefile to build it can be found in the example <a href=../../../../../../Examples/SimulationControl/simplePlatformInHarnessUsingOP/harness title='look at a Harness and a Makefile for building'>../Examples/SimulationControl/simplePlatformInHarnessUsingOP/harness</a> directory
		<br/><br>
		The application ELF files used can be re-built in the <a href=../../../Applications/peakSpeed1_m16c title='look at the Applications build directory'>applications</a> directory.
	</p>
<h3>Re-building Platform</h3>
<p>
		The platform/module can be compiled using MSYS/MinGW 
		under Windows, and GCC under Linux.
		<br/><br>
		The compilation can be performed using the following command lines:
		<br/><br>
		<b>Windows Command shell</b><br>
		This requires an MSYS environment setup<br>
		>mingw32-make -f %IMPERAS_HOME%\ImperasLib\buildutils\Makefile.harness ^<br>
				  &nbsp;&nbsp;&nbsp;&nbsp;SRC=harness.c ^<br>
				  &nbsp;&nbsp;&nbsp;&nbsp;NOVLNV=1<br>
		<br>
		<b>Linux or Windows MSYS shell (if you have an MSYS environment set up)</b><br>
		>make -f ${IMPERAS_HOME}/ImperasLib/buildutils/Makefile.harness \<br>
				 &nbsp;&nbsp;&nbsp;&nbsp;SRC=harness.c \<br>
				 &nbsp;&nbsp;&nbsp;&nbsp;NOVLNV=1<br>
	</p>
<h3>Re-building Application</h3>
<p>
		The applications were built using a Cross Compiler toolchain, that may be 
		available from the OVPWorld website. An M16C.makefile.include is included
		that is used to setup a basic build environment for that toolchain. This can 
		be modified to use alternative compiler flags.
	</p>
<hr>
<a id='rmWriteSectionISS'>
<h1>The Imperas Instruction Set Simulator (ISS)</h1>
</a>
<p>
		The demonstrations provided for single core processors use the Imperas ISS to create a simple platform and run the cross compiled target applications.
	</p>
<p>
		The Imperas ISS is often the first simulation product used in an embedded software development project.
		The Imperas ISS allows the development and debug of code for the target architecture on an x86/x64 host PC with the minimum of setup and effort.
		It simply requires the cross compilation of your application and running the ISS with an argument to specify the name of the application object.
	</p>
<p><img src=../../../../pictures/ISS_Overview.jpg alt=IMG_ISS_OVERVIEW height=400></p>
<p>
		The ISS makes use of the Imperas OVP Fast Processor Model library providing access to over 130 different instruction accurate embedded CPU model variants from the MIPS 24Kc to the ARM Cortex-A57MPx4 quad core 64 bit processor.
		The ISS product package comes with all these CPU models and example usage of them.
	</p>
<h3>Imperas ISS Detailed Features</h3>
<ul>
<li>Released to run in x86 32 bit Windows/Linux and x64 64 bit Windows/Linux environments</li>
<li>Includes the full library of all publicly released Imperas OVP Fast Processor Models</li>
<li>Includes a GDB debugger for each CPU family</li>
<li>Connects to the Imperas Graphical User Interface (eGui) to provide full source code debug</li>
<li>Configurable trace subsystem to provide instruction and register tracing</li>
<li>Loads .elf file binaries directly</li>
<li>Allows one instance of a single or multi-core CPU with full memory construction</li>
<li>Uses built in semi-hosting to support library functions such as printf and fopen, and can access host native resources</li>
<li>Can be run interactively or in script/batch mode for regression testing</li>
<li>Includes Imperas Just-In-Time (JIT) Code Morphing high performance CPU simulator technology</li>
<li>Works with Eclipse/CDT GUI</li>
</ul>
<p>
		For more information on the Imperas ISS, visit the <a href=https://www.imperas.com/iss title='look at the ISS page on Imperas.com'>ISS page</a> on the Imperas web site.
	</p>
<p>
		To see the command line options available for the ISS, type 'iss.exe or issdemo.exe -help' to see a list.
	</p>
<hr>
<p>###</p>
</div></body>
</html>
