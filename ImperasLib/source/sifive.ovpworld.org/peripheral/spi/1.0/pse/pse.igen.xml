<?xml version="1.0" encoding="UTF-8"?>

 <peripheral constructor="constructor"
    destructor="destructor"
    formalValues="F"
    httpvis="F"
    imagefile="pse.pse"
    library="peripheral"
    name="spi"
    nbyte="F"
    recursive="F"
    releasestatus="0"
    saveRestore="F"
    vendor="sifive.ovpworld.org"
    version="1.0"
    visibility="0">
    <docsection name="doc"
        text="Description">
        <doctext name="txt"
            text="SiFive coreip-s51-arty SPI Registers and Memory (spi)"/>
    </docsection>
    <docsection name="doc_1"
        text="Licensing">
        <doctext name="txt"
            text="Open Source Apache 2.0"/>
    </docsection>
    <docsection name="doc_2"
        text="Limitations">
        <doctext name="txt"
            text="This model implements only the registers and memory. It contains no SPI behaviour."/>
    </docsection>
    <docsection name="doc_3"
        text="Reference">
        <doctext name="txt"
            text="SiFive Freedom E SDK coreip-s51-arty Board Support Package details."/>
    </docsection>
    <busslaveport addresswidth="32"
        mustbeconnected="T"
        name="mport1"
        size="0x20000000">
        <addressblock name="MEM"
            size="0x20000000"
            width="32">
            <localmemory name="mem"
                size="0x20000000"/>
        </addressblock>
    </busslaveport>
    <busslaveport addresswidth="32"
        dfltFuncs="T"
        mustbeconnected="T"
        name="bport1"
        size="0x1000">
        <addressblock name="REG"
            size="0x1000"
            width="32">
            <memorymappedregister access="rw"
                isvolatile="T"
                name="sckdiv"
                nbyte="F"
                width="32"
                writefunction="wrSckdiv"
                writemask="4095">
                <docsection name="doc"
                    text="Description">
                    <doctext name="txt"
                        text="Serial clock divisor"/>
                    <doctext name="txt_1"
                        text="Divisor for serial clock"/>
                </docsection>
                <field access="rw"
                    bitoffset="0"
                    name="scale"
                    width="12"/>
                <reset mask="0xffffffff"
                    name="resetNet"
                    value="0x00000003"/>
            </memorymappedregister>
            <memorymappedregister access="rw"
                isvolatile="T"
                name="sckmode"
                nbyte="F"
                offset="0x4"
                width="32"
                writefunction="wrSckmode"
                writemask="3">
                <docsection name="doc"
                    text="Description">
                    <doctext name="txt"
                        text="Serial clock mode"/>
                    <doctext name="txt_1"
                        text="Serial clock phase"/>
                    <doctext name="txt_2"
                        text="Serial clock polarity"/>
                </docsection>
                <field access="rw"
                    name="pha"
                    width="1"/>
                <field access="rw"
                    bitoffset="1"
                    name="pol"
                    width="1"/>
                <reset mask="0xffffffff"
                    name="resetNet"
                    value="0x00000000"/>
            </memorymappedregister>
            <memorymappedregister access="rw"
                isvolatile="T"
                name="csid"
                nbyte="F"
                offset="0x10"
                width="32">
                <docsection name="doc"
                    text="Description">
                    <doctext name="txt"
                        text="Chip select ID"/>
                </docsection>
                <reset mask="0xffffffff"
                    name="resetNet"
                    value="0x00000000"/>
            </memorymappedregister>
            <memorymappedregister access="rw"
                isvolatile="T"
                name="csdef"
                nbyte="F"
                offset="0x14"
                width="32">
                <docsection name="doc"
                    text="Description">
                    <doctext name="txt"
                        text="Chip select default"/>
                </docsection>
                <reset mask="0xffffffff"
                    name="resetNet"
                    value="0x00000001"/>
            </memorymappedregister>
            <memorymappedregister access="rw"
                isvolatile="T"
                name="csmode"
                nbyte="F"
                offset="0x18"
                width="32"
                writefunction="wrCsmode"
                writemask="3">
                <docsection name="doc"
                    text="Description">
                    <doctext name="txt"
                        text="Chip select mode"/>
                    <doctext name="txt_1"/>
                </docsection>
                <field access="rw"
                    bitoffset="0"
                    name="mode"
                    width="2"/>
                <reset mask="0xffffffff"
                    name="resetNet"
                    value="0x00000000"/>
            </memorymappedregister>
            <memorymappedregister access="rw"
                isvolatile="T"
                name="delay0"
                nbyte="F"
                offset="0x28"
                width="32">
                <docsection name="doc"
                    text="Description">
                    <doctext name="txt"
                        text="Delay control 0"/>
                    <doctext name="txt_1"
                        text="CS to SCK Delay"/>
                    <doctext name="txt_2"
                        text="SCK to CS Delay"/>
                </docsection>
                <field access="rw"
                    name="cssck"
                    width="8"/>
                <field access="rw"
                    bitoffset="16"
                    name="sckcs"
                    width="8"/>
                <reset mask="0xffffffff"
                    name="resetNet"
                    value="0x00000000"/>
                <field bitoffset="8"
                    name="__pad8"
                    width="8"/>
            </memorymappedregister>
            <memorymappedregister access="rw"
                isvolatile="T"
                name="delay1"
                nbyte="F"
                offset="0x2c"
                width="32">
                <docsection name="doc"
                    text="Description">
                    <doctext name="txt"
                        text="Delay control 1"/>
                    <doctext name="txt_1"
                        text="Minimum CS inactive time"/>
                    <doctext name="txt_2"
                        text="Maximum interframe delay"/>
                </docsection>
                <field access="rw"
                    name="intercs"
                    width="8"/>
                <field access="rw"
                    bitoffset="16"
                    name="interxfr"
                    width="8"/>
                <reset mask="0xffffffff"
                    name="resetNet"
                    value="0x00000000"/>
                <field bitoffset="8"
                    name="__pad8"
                    width="8"/>
            </memorymappedregister>
            <memorymappedregister access="rw"
                isvolatile="T"
                name="fmt"
                nbyte="F"
                offset="0x40"
                width="32">
                <docsection name="doc"
                    text="Description">
                    <doctext name="txt"
                        text="Frame format"/>
                    <doctext name="txt_1"
                        text="SPI Protocol"/>
                    <doctext name="txt_2"
                        text="SPI endinanness"/>
                    <doctext name="txt_3"
                        text="SPI I/O Direction"/>
                    <doctext name="txt_4"
                        text="Number of bits per frame"/>
                </docsection>
                <field access="rw"
                    name="proto"
                    width="2"/>
                <field access="rw"
                    bitoffset="2"
                    name="endian"
                    width="1"/>
                <field access="rw"
                    bitoffset="3"
                    name="dir"
                    width="1"/>
                <field access="rw"
                    bitoffset="16"
                    name="len"
                    width="4"/>
                <reset mask="0xffffffff"
                    name="resetNet"
                    value="0x00080008"/>
                <field bitoffset="4"
                    name="__pad4"
                    width="12"/>
            </memorymappedregister>
            <memorymappedregister access="rw"
                isvolatile="T"
                name="txdata"
                nbyte="F"
                offset="0x48"
                readfunction="rdTx"
                width="32"
                writefunction="wrTx"
                writemask="255">
                <docsection name="doc"
                    text="Description">
                    <doctext name="txt"
                        text="Tx FIFO data"/>
                    <doctext name="txt_1"
                        text="Transmit data"/>
                    <doctext name="txt_2"
                        text="FIFO full flag"/>
                </docsection>
                <field access="rw"
                    name="data"
                    width="8"/>
                <field access="rw"
                    bitoffset="31"
                    name="full"
                    width="1"/>
                <reset mask="0xffffffff"
                    name="resetNet"
                    value="0x00000000"/>
                <field bitoffset="8"
                    name="__pad8"
                    width="23"/>
            </memorymappedregister>
            <memorymappedregister access="r"
                isvolatile="T"
                name="rxdata"
                nbyte="F"
                offset="0x4c"
                readfunction="rdRx"
                width="32">
                <docsection name="doc"
                    text="Description">
                    <doctext name="txt"
                        text="Rx FIFO data"/>
                    <doctext name="txt_1"
                        text="Received data"/>
                    <doctext name="txt_2"
                        text="FIFO empty flag"/>
                </docsection>
                <field access="r"
                    name="data"
                    width="8"/>
                <field access="r"
                    bitoffset="31"
                    name="empty"
                    width="1"/>
                <reset mask="0xffffffff"
                    name="resetNet"
                    value="0x00000000"/>
                <field bitoffset="8"
                    name="__pad8"
                    width="23"/>
            </memorymappedregister>
            <memorymappedregister access="rw"
                isvolatile="T"
                name="txmark"
                nbyte="F"
                offset="0x50"
                width="32"
                writefunction="wrTxMark"
                writemask="3">
                <docsection name="doc"
                    text="Description">
                    <doctext name="txt"
                        text="Tx FIFO watermark"/>
                    <doctext name="txt_1"
                        text="Transmit watermark"/>
                </docsection>
                <field access="rw"
                    bitoffset="0"
                    name="txmark"
                    width="3"/>
                <reset mask="0xffffffff"
                    name="resetNet"
                    value="0x00000001"/>
            </memorymappedregister>
            <memorymappedregister access="rw"
                isvolatile="T"
                name="rxmark"
                nbyte="F"
                offset="0x54"
                width="32"
                writefunction="wrRxMark"
                writemask="3">
                <docsection name="doc"
                    text="Description">
                    <doctext name="txt"
                        text="Rx FIFO watermark"/>
                    <doctext name="txt_1"
                        text="receive watermark"/>
                </docsection>
                <field access="rw"
                    bitoffset="0"
                    name="rxmark"
                    width="3"/>
                <reset mask="0xffffffff"
                    name="resetNet"
                    value="0x00000001"/>
            </memorymappedregister>
            <memorymappedregister access="rw"
                isvolatile="T"
                name="fctrl"
                nbyte="F"
                offset="0x60"
                width="32">
                <docsection name="doc"
                    text="Description">
                    <doctext name="txt"
                        text="SPI flash interface control"/>
                    <doctext name="txt_1"
                        text="SPI Flash Mode Select"/>
                </docsection>
                <field access="rw"
                    bitoffset="0"
                    name="en"
                    width="1"/>
                <reset mask="0xffffffff"
                    name="resetNet"
                    value="0x00000001"/>
            </memorymappedregister>
            <memorymappedregister access="rw"
                isvolatile="T"
                name="ffmt"
                nbyte="F"
                offset="0x64"
                width="32">
                <docsection name="doc"
                    text="Description">
                    <doctext name="txt"
                        text="SPI flash instruction format"/>
                    <doctext name="txt_1"
                        text="Enable sending of command"/>
                    <doctext name="txt_2"
                        text="Number of address bytes(0 to 4)"/>
                    <doctext name="txt_3"
                        text="Number of dummy cycles"/>
                    <doctext name="txt_4"
                        text="Protocol for transmitting command"/>
                    <doctext name="txt_5"
                        text="Protocol for transmitting address and padding"/>
                    <doctext name="txt_6"
                        text="Protocol for receiving data bytes"/>
                    <doctext name="txt_7"
                        text="Value of command byte"/>
                    <doctext name="txt_8"
                        text="First 8 bits to transmit during dummy cycles"/>
                </docsection>
                <field access="rw"
                    name="cmd_en"
                    width="1"/>
                <field access="rw"
                    bitoffset="1"
                    name="addr_len"
                    width="3"/>
                <field access="rw"
                    bitoffset="4"
                    name="pad_cnt"
                    width="4"/>
                <field access="rw"
                    bitoffset="8"
                    name="cmd_proto"
                    width="2"/>
                <field access="rw"
                    bitoffset="10"
                    name="addr_proto"
                    width="2"/>
                <field access="rw"
                    bitoffset="12"
                    name="data_proto"
                    width="2"/>
                <field access="rw"
                    bitoffset="16"
                    name="cmd_code"
                    width="8"/>
                <field access="rw"
                    bitoffset="24"
                    name="pad_code"
                    width="8"/>
                <reset mask="0xffffffff"
                    name="resetNet"
                    value="0x00030007"/>
                <field bitoffset="14"
                    name="__pad14"
                    width="2"/>
            </memorymappedregister>
            <memorymappedregister access="r"
                isvolatile="T"
                name="ie"
                nbyte="F"
                offset="0x70"
                width="32">
                <docsection name="doc"
                    text="Description">
                    <doctext name="txt"
                        text="SPI interrupt enable"/>
                    <doctext name="txt_1"
                        text="Transmit watermark enable"/>
                    <doctext name="txt_2"
                        text="Receive watermark enable"/>
                </docsection>
                <field access="r"
                    name="txwm"
                    width="1"/>
                <field access="r"
                    bitoffset="1"
                    name="rxwm"
                    width="1"/>
                <reset mask="0xffffffff"
                    name="resetNet"
                    value="0x00000000"/>
            </memorymappedregister>
            <memorymappedregister access="r"
                isvolatile="T"
                name="ip"
                nbyte="F"
                offset="0x74"
                width="32">
                <docsection name="doc"
                    text="Description">
                    <doctext name="txt"
                        text="SPI interrupt pending"/>
                    <doctext name="txt_1"
                        text="Transmit watermark pending"/>
                    <doctext name="txt_2"
                        text="Receive watermark pending"/>
                </docsection>
                <field access="r"
                    name="txwm"
                    width="1"/>
                <field access="r"
                    bitoffset="1"
                    name="rxwm"
                    width="1"/>
                <reset mask="0xffffffff"
                    name="resetNet"
                    value="0x00000000"/>
            </memorymappedregister>
        </addressblock>
    </busslaveport>
    <netport name="resetNet"
        type="input"
        updatefunction="resetCB"/>
    <fileversion major="1"
        minor="0"
        name="_version_0"/>
 </peripheral>
